{
  "author" : "LoCalm",
  "version" : "1.2.8",
  "userSecure" : "",
  "currTypeMapperGroupName" : "Default",
  "currTemplateGroupName" : "cloud",
  "currColumnConfigGroupName" : "Default",
  "currGlobalConfigGroupName" : "Default",
  "typeMapper" : { },
  "template" : {
    "cloud" : {
      "name" : "cloud",
      "elementList" : [ {
        "name" : "controller.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Controller\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/controller\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}controller;\n\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport com.github.xiaoymin.knife4j.annotations.ApiOperationSupport;\nimport com.imtristone.core.boot.ctrl.BladeController;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport $!{tableInfo.savePackageName}.service.I$!{tableInfo.name}Service;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\nimport $!{tableInfo.savePackageName}.wrapper.$!{tableInfo.name}Wrapper;\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\nimport io.swagger.annotations.ApiParam;\nimport lombok.AllArgsConstructor;\nimport org.springblade.core.log.annotation.ApiLog;\nimport org.springblade.core.mp.support.Query;\nimport org.springblade.core.tool.api.R;\nimport org.springframework.web.bind.annotation.*;\nimport springfox.documentation.annotations.ApiIgnore;\n\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * $!{tableInfo.comment} 表控制层\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@RestController\n@AllArgsConstructor\n@RequestMapping(\"/$!tool.firstLowerCase($tableInfo.name)\")\n@Api(value = \"$!{tableInfo.comment}\", tags = \"$!{tableInfo.comment}接口\")\npublic class $!{tableName} extends BladeController {\n\n    private I$!{tableInfo.name}Service service;\n\n\n    @GetMapping(\"/detail\")\n    @ApiLog(\"$!{tableInfo.comment}-详情\")\n    @ApiOperation(value = \"详情\")\n    @ApiOperationSupport(order = 1)\n    public R<$!{tableInfo.name}VO> detail($!{tableInfo.name}Entity entity) {\n        return R.data($!{tableInfo.name}Wrapper.build().entityVO(service.getId(entity.getId())));\n    }\n\n    @GetMapping(\"/page\")\n    @ApiLog(\"$!{tableInfo.comment}-分页\")\n    @ApiOperation(value = \"分页\")\n    @ApiOperationSupport(order = 2)\n    public R<IPage<$!{tableInfo.name}VO>> page(@ApiIgnore @RequestParam Map<String, Object> params, Query query) {\n        return R.data($!{tableInfo.name}Wrapper.build().pageVO(service.getPage(query, params)));\n    }\n\n    @PostMapping(\"/submit\")\n    @ApiLog(\"$!{tableInfo.comment}-新增或修改\")\n    @ApiOperationSupport(order = 3)\n    @ApiOperation(value = \"新增或修改\")\n    public R<Boolean> submit(@RequestBody $!{tableInfo.name}Entity entity) {\n        return R.status(service.saveOrUpdate(entity));\n    }\n\n    @PostMapping(\"/remove\")\n    @ApiLog(\"$!{tableInfo.comment}-删除\")\n    @ApiOperation(value = \"删除\")\n    @ApiOperationSupport(order = 4)\n    public R<Boolean> remove(@ApiParam(value = \"主键集合\", required = true) @RequestParam List<Long> ids) {\n        return R.status(service.delete(ids));\n    }\n\n}\n"
      }, {
        "name" : "wrapper.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Wrapper\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/wrapper\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}wrapper;\n\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\nimport com.imtristone.format.utils.FormatUtil;\n\n/**\n * $!{tableInfo.comment} 包装类,返回视图层所需的字段\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\npublic class $!{tableName} {\n\n    public static $!{tableInfo.name}Wrapper build() {\n        return new $!{tableInfo.name}Wrapper();\n    }\n\n    public $!{tableInfo.name}VO entityVO($!{tableInfo.name}VO entity) {\n        return FormatUtil.format(entity);\n    }\n\n    public IPage<$!{tableInfo.name}VO> pageVO(IPage<$!{tableInfo.name}VO> pages) {\n        if (pages == null) return null;\n        return pages.setRecords(FormatUtil.format(pages.getRecords()));\n    }\n\n}\n"
      }, {
        "name" : "service.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Service\"))\n##设置回调\n$!callback.setFileName($tool.append(\"I\",$tool.append($tableName, \".java\")))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/service\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}service;\n\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\nimport org.springblade.core.mp.base.BizService;\nimport org.springblade.core.mp.support.Query;\n\nimport java.util.Map;\n\n/**\n * $!{tableInfo.comment} 服务类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\npublic interface I$!{tableName} extends BizService<$!{tableInfo.name}Entity> {\n\n    IPage<$!{tableInfo.name}VO> getPage(Query query, Map<String, Object> params);\n\n    $!{tableInfo.name}VO getId(Long id);\n}\n"
      }, {
        "name" : "serviceImpl.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"ServiceImpl\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/service/impl\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}service.impl;\n\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport $!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper;\nimport $!{tableInfo.savePackageName}.service.I$!{tableInfo.name}Service;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\nimport org.springblade.core.mp.base.BizServiceImpl;\nimport org.springblade.core.mp.support.Condition;\nimport org.springblade.core.mp.support.Query;\nimport org.springblade.core.tool.constant.BladeConstant;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Map;\n\n/**\n * $!{tableInfo.comment} 服务实现类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@Service\npublic class $!{tableName} extends BizServiceImpl<$!{tableInfo.name}Mapper, $!{tableInfo.name}Entity> implements I$!{tableInfo.name}Service {\n\n    @Override\n    public IPage<$!{tableInfo.name}VO> getPage(Query query, Map<String, Object> params) {\n        return baseMapper.getPage(Condition.getPage(query), Condition.getQueryWrapper(params, $!{tableInfo.name}Entity.class), BladeConstant.DB_NOT_DELETED);\n    }\n\n    @Override\n    public $!{tableInfo.name}VO getId(Long id) {\n        return baseMapper.getId(id, BladeConstant.DB_NOT_DELETED);\n    }\n\n}\n"
      }, {
        "name" : "mapper.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Mapper\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/mapper\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}mapper;\n\nimport com.baomidou.mybatisplus.core.conditions.Wrapper;\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\nimport org.apache.ibatis.annotations.Param;\n\n/**\n * $!{tableInfo.comment} Mapper 接口\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\npublic interface $!{tableInfo.name}Mapper extends BaseMapper<$!{tableInfo.name}Entity> {\n\n    IPage<$!{tableInfo.name}VO> getPage(IPage<$!{tableInfo.name}VO> page, @Param(\"ew\") Wrapper<$!{tableInfo.name}Entity> queryWrapper, @Param(\"isDeleted\") int isDeleted);\n\n    $!{tableInfo.name}VO getId(@Param(\"id\") Long id, @Param(\"isDeleted\") int dbNotDeleted);\n    \n}\n"
      }, {
        "name" : "mapper.xml.vm",
        "code" : "##引入mybatis支持\n$!{mybatisSupport.vm}\n\n##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Mapper\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".xml\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/mapper\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"$!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper\">\n  \n    <sql id=\"getPage\">\n        SELECT #foreach($column in $tableInfo.fullColumn)$tool.hump2Underline($!{column.name})#if($foreach.count != $tableInfo.fullColumn.size()), #end#end FROM $tool.hump2Underline(${tableInfo.name})\n    </sql>\n\n    <select id=\"getPage\" resultType=\"$!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO\">\n        <include refid=\"getPage\" />\n        ${ew.customSqlSegment}\n    </select>\n\n    <select id=\"getId\" resultType=\"$!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO\">\n        <include refid=\"getPage\" />\n        WHERE id = #{id}\n    </select>\n\n\n</mapper>\n"
      }, {
        "name" : "entity.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Entity\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/entity\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}entity;\n\n##使用全局变量实现默认包导入\nimport com.baomidou.mybatisplus.annotation.TableName;\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport org.springblade.core.mp.base.BizEntity;\n\n$!{autoImport.vm}\n\n/**\n * $!{tableInfo.comment} 实体类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@Data\n@TableName(\"$!{tableInfo.name}\")\n@ApiModel(value = \"$!{tableInfo.name}对象\", description = \"$!{tableInfo.comment}\")\n@EqualsAndHashCode(callSuper = true)\npublic class $!{tableName} extends BizEntity {\n\n#foreach($column in $tableInfo.fullColumn)\n#if(\n    $!{column.name} != \"id\" && \n    $!{column.name} != \"createTime\" && \n    $!{column.name} != \"createUser\" && \n    $!{column.name} != \"createDept\" && \n    $!{column.name} != \"updateTime\" && \n    $!{column.name} != \"updateUser\" && \n    $!{column.name} != \"tenantId\"\n)\n    @ApiModelProperty(\"${column.comment}\")\n    private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n#end\n#end\n\n}\n"
      }, {
        "name" : "vo.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"VO\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/vo\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}vo;\n\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport lombok.EqualsAndHashCode;\nimport lombok.Data;\n\n/**\n * $!{tableInfo.comment} 视图实体类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@Data\n@EqualsAndHashCode(callSuper = true)\npublic class $!{tableName} extends $!{tableInfo.name}Entity {\n}\n"
      }, {
        "name" : "api.js.vm",
        "code" : "##设置回调\n$!callback.setFileName($tool.append(\"api\", \".js\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/vue\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\nimport request from '@/router/axios'\n\nconst BASE_API = '/api/im-tristone-/$!tool.firstLowerCase($tableInfo.name)'\n\nexport const getPage = (current, size, params) => request({ url: `${BASE_API}/page`, method: 'get', params: { ...params, current, size } })\nexport const getDetail = id => request({ url: `${BASE_API}/detail`, method: 'get', params: { id } })\nexport const add = data => request({ url: `${BASE_API}/submit`, method: 'post', data })\nexport const update = data => request({ url: `${BASE_API}/submit`, method: 'post', data })\nexport const remove = ids => request({ url: `${BASE_API}/remove`, method: 'post', params: { ids } })\n"
      }, {
        "name" : "index.vue.vm",
        "code" : "##定义初始变量$refs.crud.DIC[`${item.prop}`]\n#set($dic = $tool.append(\"$refs.crud.DIC\",$tool.append(\"[\",$tool.append(\"`\",$tool.append(\"${item.prop}\",$tool.append(\"`\",\"]\"))))))\n##设置回调\n$!callback.setFileName($tool.append(\"index\", \".vue\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/vue\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n<template>\n  <basic-container>\n    <avue-crud\n      ref=\"crud\"\n      v-model=\"form\"\n      :data=\"data\"\n      :option=\"option\"\n      :page.sync=\"page\"\n      :table-loading=\"loading\"\n      :permission=\"permissionList\"\n      :before-open=\"beforeOpen\"\n      @row-save=\"rowSave\"\n      @row-update=\"rowUpdate\"\n      @row-del=\"rowDel\"\n      @search-reset=\"searchReset\"\n      @selection-change=\"selectionChange\"\n      @refresh-change=\"refreshChange\"\n      @on-load=\"onLoad\"\n    >\n      <!-- 表格顶部-左 -->\n      <template #menuLeft=\"{ size }\">\n        <el-button\n          v-if=\"permissionList.delBtn\"\n          type=\"danger\"\n          icon=\"el-icon-delete\"\n          :size=\"size\"\n          :disabled=\"!selectionList.length\"\n          @click=\"handleDelete\"\n          plain\n        >\n          删 除\n        </el-button>\n      </template>\n\n      <!-- 表格顶部-右 -->\n      <template #menuRight=\"{ size }\">\n        <el-tooltip :enterable=\"false\" content=\"清空筛选\" placement=\"bottom\">\n          <el-button type=\"danger\" icon=\"el-icon-refresh-right\" :size=\"size\" circle plain @click=\"searchReset\"/>\n        </el-tooltip>\n      </template>\n\n      <!-- 自定义列头 -->\n      <template v-for=\"item in searchFieldColumns\" #[`${item.prop}Header`]=\"{ column, index }\">\n        <div\n          v-if=\"!item.search || !item.type\"\n          :key=\"item.prop\"\n          style=\"display: flex; align-items: center; justify-content: center; color: #999; font-weight: lighter\"\n        >\n          <i class=\"el-icon-warning-outline\" style=\"margin-right: 4px\"></i>\n          <span>暂无搜索项</span>\n        </div>\n        <template v-else>\n          <el-input-number\n            v-if=\"item.type === 'number'\"\n            v-model=\"query[item.prop]\"\n            placeholder=\"请输入\"\n            controls-position=\"right\"\n            size=\"mini\"\n            :key=\"item.prop\"\n            @keyup.enter.native=\"onSearch\"\n          />\n          <el-select\n            v-else-if=\"['checkbox', 'radio', 'select', 'switch'].includes(item.type)\"\n            v-model=\"query[item.prop]\"\n            :remote=\"item.remote\"\n            :filterable=\"item.filterable\"\n            placeholder=\"请选择\"\n            size=\"mini\"\n            clearable\n            :key=\"item.prop\"\n            @change=\"onSearch\"\n          >\n            <el-option\n              v-for=\"subItem in $!{dic} || item.dicData || []\"\n              :key=\"subItem[item.props.value]\"\n              :label=\"subItem[item.props.label]\"\n              :value=\"subItem[item.props.value]\"\n            >\n            </el-option>\n          </el-select>\n          <el-date-picker\n            v-else-if=\"['date', 'datetime'].includes(item.type)\"\n            class=\"crud-header-date-range\"\n            v-model=\"query[item.prop]\"\n            type=\"daterange\"\n            start-placeholder=\"开始时间\"\n            end-placeholder=\"结束时间\"\n            size=\"mini\"\n            clearable\n            :value-format=\"item.valueFormat\"\n            :default-time=\"['00:00:00', '23:59:59']\"\n            :key=\"item.prop\"\n            @change=\"onSearch\"\n          />\n          <avue-input-tree\n            v-else-if=\"item.type === 'tree'\"\n            v-model=\"query[item.prop]\"\n            :props=\"item.props\"\n            :dic=\"$!{dic} || item.dicData || []\"\n            :multiple=\"item.multiple\"\n            :checkStrictly=\"item.checkStrictly\"\n            :parent=\"item.parent\"\n            placeholder=\"请选择\"\n            size=\"mini\"\n            clearable\n            :key=\"item.prop\"\n          />\n          <avue-input-table\n            v-else-if=\"item.type === 'table'\"\n            v-model=\"query[item.prop]\"\n            :suffixIcon=\"item.suffixIcon\"\n            :props=\"item.props\"\n            :size=\"item.children.size\"\n            :dialogWidth=\"item.dialogWidth\"\n            :column=\"{ children: item.children }\"\n            :key=\"item.prop\"\n            clearable\n            :on-load=\"item.onLoad\"\n            placeholder=\"请选择\"\n          />\n          <el-input\n            v-else\n            v-model=\"query[item.prop]\"\n            placeholder=\"请输入\"\n            size=\"mini\"\n            clearable\n            :key=\"item.prop\"\n            @keyup.enter.native=\"onSearch\"\n            @clear=\"onSearch\"\n          />\n        </template>\n      </template>\n\n      <!-- 自定义内容列 -->\n      <template v-for=\"field in ['status']\" #[`${field}`]=\"{ row }\">\n        <div :key=\"field\" @click.stop>\n          <el-switch\n            v-model=\"row[field]\"\n            :inactive-value=\"0\"\n            inactive-text=\"否\"\n            inactive-color=\"#ff4949\"\n            :active-value=\"1\"\n            active-text=\"是\"\n            active-color=\"#13ce66\"\n            :disabled=\"!permissionList.editBtn\"\n            @change=\"onYesOrNoSwitch(row, field, $event)\"\n          />\n        </div>\n      </template>\n\n      <!-- 操作栏按钮自定义 -->\n      <template #menu=\"{ row, index }\">\n        <el-tooltip v-if=\"permissionList.viewBtn\" :enterable=\"false\" content=\"查看详情\" placement=\"bottom\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-view\"\n            size=\"mini\"\n            plain\n            circle\n            @click.stop=\"$refs.crud.rowView(row, index)\"\n          />\n        </el-tooltip>\n        <el-tooltip v-if=\"permissionList.editBtn\" :enterable=\"false\" content=\"编辑\" placement=\"bottom\">\n          <el-button\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            size=\"mini\"\n            plain\n            circle\n            @click.stop=\"$refs.crud.rowEdit(row, index)\"\n          />\n        </el-tooltip>\n        <el-tooltip v-if=\"permissionList.delBtn\" :enterable=\"false\" content=\"删除\" placement=\"bottom\">\n          <el-button\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            size=\"mini\"\n            plain\n            circle\n            @click.stop=\"$refs.crud.rowDel(row, index)\"\n          />\n        </el-tooltip>\n      </template>\n    </avue-crud>\n  </basic-container>\n</template>\n\n<script>\nimport {mapGetters} from 'vuex'\nimport singleCrud from '@/mixins/single-crud'\nimport {add, getDetail, getPage, remove, update} from './api'\nimport {option} from './option'\n\nexport default {\n  mixins: [singleCrud()],\n\n  data() {\n    return {\n      option\n    }\n  },\n\n  computed: {\n    ...mapGetters(['permission']),\n    permissionList() {\n      return {\n        addBtn: true,\n        editBtn: true,\n        delBtn: true,\n        viewBtn: true\n      }\n    }\n  },\n\n  methods: {\n    beforeOpen(done, type) {\n      if (['edit', 'view'].includes(type)) {\n        getDetail(this.form.id).then(res => {\n          this.form = res.data.data\n          done()\n        })\n      } else {\n        done()\n      }\n    },\n    rowSave(row, done, loading) {\n      add({...row, parentId: this.$route.query.id}).then(\n        () => {\n          this.onLoad(this.page)\n          this.$message.success('操作成功!')\n          done()\n        },\n        error => {\n          loading()\n          console.log(error)\n        }\n      )\n    },\n    rowUpdate(row, index, done, loading) {\n      update(row).then(\n        () => {\n          this.onLoad(this.page)\n          this.$message.success('操作成功!')\n          done()\n        },\n        error => {\n          loading()\n          console.log(error)\n        }\n      )\n    },\n    onYesOrNoSwitch(row, field, newVal) {\n      this.loading = true\n      update({id: row.id, [field]: newVal}).then(\n        () => {\n          this.onLoad(this.page)\n          this.$message.success('操作成功!')\n        },\n        error => {\n          this.loading = false\n          row[field] = !newVal\n          console.log(error)\n        }\n      )\n    },\n    rowDel(row) {\n      this.$confirm('确定将选择数据删除?', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          return remove(row.id)\n        })\n        .then(() => {\n          this.onLoad(this.page)\n          this.$message.success('操作成功!')\n        })\n    },\n    handleDelete() {\n      this.$confirm('确定将选择数据删除?', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          return remove(this.ids)\n        })\n        .then(() => {\n          this.onLoad(this.page)\n          this.$message.success('操作成功!')\n        })\n    },\n    onLoad(page, params = {}) {\n      this.loading = true\n      getPage(page.currentPage, page.pageSize, {\n        ...params,\n        ...this.handleQueryFormat(this.query, this.option.column),\n      })\n        .then(res => {\n          const data = res.data.data\n          this.page.total = data.total\n          this.data = data.records\n          this.loading = false\n          this.selectionClear()\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading = false\n        })\n    }\n  }\n}\n</script>\n"
      }, {
        "name" : "option.js.vm",
        "code" : "##设置回调\n$!callback.setFileName($tool.append(\"option\", \".js\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/vue\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\nexport const option = {\n  size: 'mini',\n  align: 'center',\n  labelWidth: 120,\n  height: 'auto',\n  calcHeight: 65,\n  tip: false,\n  searchShow: false,\n  searchShowBtn: false,\n  columnBtn: false,\n  border: true,\n  index: true,\n  indexLabel: '序号',\n  selection: true,\n  menuWidth: 130,\n  addBtn: true,\n  editBtn: false,\n  delBtn: false,\n  viewBtn: false,\n  highlightCurrentRow: false,\n  dialogWidth: '800px',\n  dialogClickModal: false,\n  column: [\n#foreach($column in $tableInfo.fullColumn)\n#if(\n    $!{column.name} != \"id\" && \n    $!{column.name} != \"createTime\" && \n    $!{column.name} != \"createUser\" && \n    $!{column.name} != \"createDept\" && \n    $!{column.name} != \"updateTime\" && \n    $!{column.name} != \"updateUser\" && \n    $!{column.name} != \"tenantId\"\n)\n    {\n      label: '${column.comment}',\n      prop: '$!{column.name}',\n      children: [\n        {\n          label: '${column.comment}',\n          prop: '$!{column.name}',\n          type: 'input',\n          minWidth: 140,\n          overHidden: true,\n        }\n      ]\n    },\n#end\n#end\n  ]\n}\n"
      } ]
    }
  },
  "columnConfig" : { },
  "globalConfig" : { }
}