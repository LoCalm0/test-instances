{
  "author" : "LoCalm",
  "version" : "1.2.8",
  "userSecure" : "",
  "currTypeMapperGroupName" : "Default",
  "currTemplateGroupName" : "LoCalm",
  "currColumnConfigGroupName" : "Default",
  "currGlobalConfigGroupName" : "Default",
  "typeMapper" : { },
  "template" : {
    "LoCalm" : {
      "name" : "LoCalm",
      "elementList" : [ {
        "name" : "controller.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Controller\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/controller\"))\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}controller;\n\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name};\nimport $!{tableInfo.savePackageName}.service.$!{tableInfo.name}Service;\nimport $!{tableInfo.savePackageName}.wrapper.$!{tableInfo.name}Wrapper;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.github.xiaoymin.knife4j.annotations.ApiOperationSupport;\nimport com.tristone.common.format.util.FormatUtil;\nimport io.swagger.annotations.ApiOperation;\nimport lombok.SneakyThrows;\nimport org.jeecg.common.api.vo.Result;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport java.util.List;\n\n/**\n * $!{tableInfo.comment} 表控制层\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@RestController\n@RequestMapping(\"/$!tool.firstLowerCase($tableInfo.name)\")\npublic class $!{tableName} {\n\n    private $!{tableInfo.name}Service service;\n\n\n    @GetMapping(\"/table\")\n    @ApiOperation(value = \"table\")\n    @ApiOperationSupport(order = 1)\n    public ModelAndView table() {\n        return new ModelAndView(\"/$!{tableInfo.name}/table\");\n    }\n\n    @SneakyThrows\n    @RequestMapping(\"/form\")\n    @ApiOperation(value = \"form\")\n    @ApiOperationSupport(order = 2)\n    public ModelAndView form(Long id) {\n        return new ModelAndView(\"/$!{tableInfo.name}/form\", \"formJson\", id == null ? \"\" : new ObjectMapper().writeValueAsString($!{tableInfo.name}Wrapper.build().entityVO(service.getById(id))));\n    }\n\n    @GetMapping(\"/page\")\n    @ApiOperation(value = \"分页\")\n    @ApiOperationSupport(order = 3)\n    public Result<IPage<$!{tableInfo.name}VO>> page(@RequestParam Integer pageNo, @RequestParam Integer pageSize) {\n        return Result.OK($!{tableInfo.name}Wrapper.build().pageVO(service.page(Page.of(pageNo, pageSize))));\n    }\n    \n    @PostMapping(\"/submit\")\n    @ApiOperation(value = \"新增或修改\")\n    @ApiOperationSupport(order = 4)\n    public Result<Boolean> submit(@RequestBody $!{tableInfo.name}VO entity) {\n        return Result.OK(service.saveOrUpdate(FormatUtil.dateTimeToTimestamp(entity)));\n    }\n\n    @PostMapping(\"/remove\")\n    @ApiOperation(value = \"删除\")\n    @ApiOperationSupport(order = 5)\n    public Result<Boolean> remove(@RequestParam List<Long> ids) {\n        return Result.OK(service.removeByIds(ids));\n    }\n\n}\n"
      }, {
        "name" : "entity.java.vm",
        "code" : "##引入宏定义\n$!{define.vm}\n\n##使用宏定义设置回调（保存位置与文件后缀）\n#save(\"/entity\", \".java\")\n\n##使用宏定义设置包后缀\n#setPackageSuffix(\"entity\")\n\n##使用全局变量实现默认包导入\n$!{autoImport.vm}\nimport com.baomidou.mybatisplus.annotation.TableName;\nimport com.tristone.common.base.BaseEntity;\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n/**\n * $!{tableInfo.comment} 实体类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@Data\n@EqualsAndHashCode(callSuper = true)\n@TableName(\"$!{tableInfo.obj}\")\n@ApiModel(value = \"$!{tableInfo.name}对象\", description = \"$!{tableInfo.comment}\")\npublic class $!{tableInfo.name} extends BaseEntity {\n\n#foreach($column in $tableInfo.fullColumn)\n\t@ApiModelProperty(\"${column.comment}\")\n    private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n#end\n\n#foreach($column in $tableInfo.fullColumn)\n#end\n\n}\n"
      }, {
        "name" : "mapper.xml.vm",
        "code" : "##引入mybatis支持\n$!{mybatisSupport.vm}\n\n##设置保存名称与保存位置\n$!callback.setFileName($tool.append($!{tableInfo.name}, \"Dao.xml\"))\n$!callback.setSavePath($tool.append($modulePath, \"/src/main/resources/mapper\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"$!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper\">\n  \n\n</mapper>\n"
      }, {
        "name" : "service.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Service\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/service\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}service;\n\nimport com.baomidou.mybatisplus.extension.service.IService;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\n\n/**\n * $!{tableInfo.comment} 服务类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\npublic interface I$!{tableName} extends IService<$!{tableInfo.name}Entity> {\n\n}\n"
      }, {
        "name" : "serviceImpl.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"ServiceImpl\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/service/impl\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}service.impl;\n\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport $!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper;\nimport $!{tableInfo.savePackageName}.service.I$!{tableInfo.name}Service;\nimport org.springframework.stereotype.Service\n\n/**\n * $!{tableInfo.comment} 服务实现类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@Service\npublic class $!{tableName} extends ServiceImpl<$!{tableInfo.name}Mapper, $!{tableInfo.name}Entity> implements I$!{tableInfo.name}Service {\n}\n"
      }, {
        "name" : "mapper.java.vm",
        "code" : "##定义初始变量\n#set($tableName = $tool.append($tableInfo.name, \"Mapper\"))\n##设置回调\n$!callback.setFileName($tool.append($tableName, \".java\"))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \"/mapper\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($tableInfo.savePackageName)package $!{tableInfo.savePackageName}.#{end}dao;\n\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\n\n/**\n * $!{tableInfo.comment} Mapper 接口\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\npublic interface $!{tableInfo.name}Mapper extends BaseMapper<$!{tableInfo.name}Entity> {\n}\n"
      }, {
        "name" : "vo.java.vm",
        "code" : "package com.tristone.cont.vo;\n\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n\n/**\n * $!{tableInfo.comment} 视图实体类\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd\")\n */\n@Data\n@EqualsAndHashCode(callSuper = true)\npublic class $!{tableInfo.name}VO extends $!{tableInfo.name}Entity {\n}\n"
      }, {
        "name" : "wrapper.java.vm",
        "code" : "package com.tristone.cont.wrapper;\n\nimport cn.hutool.core.bean.BeanUtil;\nimport com.baomidou.mybatisplus.core.metadata.IPage;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport com.tristone.common.format.util.FormatUtil;\nimport $!{tableInfo.savePackageName}.entity.$!{tableInfo.name}Entity;\nimport $!{tableInfo.savePackageName}.vo.$!{tableInfo.name}VO;\n\npublic class $!{tableInfo.name}Wrapper {\n\n    public static $!{tableInfo.name}Wrapper build() {\n        return new $!{tableInfo.name}Wrapper();\n    }\n\n    public $!{tableInfo.name}VO entityVO($!{tableInfo.name}Entity entity) {\n        return FormatUtil.timestampToDateTime(BeanUtil.copyProperties(entity, $!{tableInfo.name}VO.class));\n    }\n\n    public IPage<$!{tableInfo.name}VO> pageVO(IPage<$!{tableInfo.name}Entity> page) {\n        if (page == null) return null;\n        return Page.<$!{tableInfo.name}VO>of(page.getCurrent(), page.getSize(), page.getTotal()).setRecords(FormatUtil.format(BeanUtil.copyToList(page.getRecords(), $!{tableInfo.name}VO.class)));\n    }\n\n}\n"
      } ]
    }
  },
  "columnConfig" : { },
  "globalConfig" : { }
}